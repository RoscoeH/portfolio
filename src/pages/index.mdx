---
---

import theme from "../gatsby-plugin-theme-ui"

<SiteMetaData>
  {({ description }) => (
    <Box sx={{ bg: "muted", p: 3, borderRadius: 2 }}>{description}</Box>
  )}
</SiteMetaData>

<Divider />

<Heading variant="styles.h2">Latest Projects</Heading>
<SourceList>
  {projects => (
    <Grid columns={[1, 2, 3]}>
      {projects.map(({ node: { frontmatter, fields } }, index) => {
        const {
          title,
          subtitle,
          description,
          links,
          featuredImage,
        } = frontmatter
        const { slug } = fields
        return (
          <Card key={title}>
            <Flex mb="3">
              {featuredImage && (
                <Img
                  fixed={featuredImage.childImageSharp.fixed}
                  alt={`${title} icon`}
                  imgStyle={{ borderRadius: theme.radii[4] }}
                />
              )}
              <Box ml="3">
                <Link href={slug} variant="heading">
                  {title}
                </Link>
                <br />
                <Text>{subtitle}</Text>
              </Box>
            </Flex>
            <Text>{description}</Text> <Link href={slug}>read more</Link>
            <Box
              sx={{
                "& > :not(:last-child)": { mr: 2 },
              }}
            >
              <Link variant="button" href={links.site}>
                Visit
              </Link>
              <Link variant="button" href={links.source}>
                Source
              </Link>
              <Link variant="button" href={links.design}>
                Design
              </Link>
              <Link variant="button" href={links.components}>
                Components
              </Link>
            </Box>
          </Card>
        )
      })}
    </Grid>
  )}
</SourceList>
