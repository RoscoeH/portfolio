---
---

import theme from "../gatsby-plugin-theme-ui"

<Heading variant="styles.h2">Projects</Heading>

<SourceList>
  {projects => (
    <Box>
      {projects.map(({ node: { frontmatter, fields } }, index) => {
        const {
          title,
          subtitle,
          description,
          links,
          featuredImage,
        } = frontmatter
        const { slug } = fields
        console.log(frontmatter)
        return (
          <Card key={title} mb="3">
            <Flex sx={{ flexDirection: "column", height: "100%" }}>
              <Flex mb="3">
                {featuredImage && (
                  <Img
                    fixed={featuredImage.childImageSharp.fixed}
                    alt={`${title} icon`}
                    imgStyle={{ borderRadius: theme.radii[3] }}
                  />
                )}
                <Box ml="3">
                  <Link href={slug} variant="heading">
                    {title}
                  </Link>
                  <br />
                  <Text>{subtitle}</Text>
                </Box>
              </Flex>
              <Text sx={{ flex: "1 1 auto" }}>{description}</Text>
              <Box
                sx={{
                  mt: 3,
                  textAlign: "right",
                  "& > :not(:last-child)": { mr: 2 },
                }}
              >
                <Link variant="button" href={links.site}>
                  <Icon icon="external" />
                  Visit Site
                </Link>
                <Link variant="button" href={slug}>
                  <Icon icon="eye" />
                  View Project
                </Link>
              </Box>
            </Flex>
          </Card>
        )
      })}
    </Box>
  )}
</SourceList>
